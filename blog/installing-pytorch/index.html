<!doctype html>
<html lang="en-us">

<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
    <title> Installing PyTorch - Tim Stuart </title>
    <meta name="HandheldFriendly" content="True">
    <meta name="MobileOptimized" content="320">
    <meta name="referrer" content="no-referrer">
    <meta name="description" content="Description for the page." />
    <meta property="og:site_name" content="Tim Stuart" />
    <meta property="og:locale" content="nn_NO" />
    <meta property="og:type" content="article" />
    <meta property="og:url" content="/blog/installing-pytorch/" />
    <meta property="og:title" content="Installing PyTorch" />
    <meta property="og:image" content="/image/image.png" />
    <meta property="og:description" content="Description for the page." />

    
        <meta property="twitter:site" content="@timoast">
    

    <meta property="twitter:title" content="Installing PyTorch" />
    <meta property="twitter:image" content="/image/image.png" />
    <meta property="twitter:card" content="summary" />
    <meta property="twitter:description" content="Description for the page." />

    <link rel="canonical" href="../../blog/installing-pytorch/">

    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/4.1.3/css/bootstrap.min.css" integrity="sha256-eSi1q2PG6J7g7ib17yAaWMcrr5GrtohYChqibrV7PBE=" crossorigin="anonymous" />

    <link rel="stylesheet" href="../../css/custom.css" />

    
        <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.13.1/styles/tomorrow.min.css" integrity="sha256-0QU8ry64q+N6YBIEF/6XF6vUeF15gbNO4tLS6ikk0FI=" crossorigin="anonymous" />
    

    

    <link rel="shortcut icon"
        href="../../img/favicon.ico">

    
</head>

<body>
    
    <div class="my-4 my-md-5 header">
    <div class="container">
        <div class="row">
            <div class="col-auto offset-md-1 d-none d-md-block">
                
            </div>
            <div class="col-auto align-self-center mr-auto">
                <a href="../../">
                    <h1 class="name">Tim Stuart</h1>
                </a>

                <ul class="nav nav-primary">
                    
                        <li class="nav-item">
                            <a class="text-uppercase nav-link text-about" href="../../">
                                
                                About
                            </a>
                        </li>
                    
                        <li class="nav-item">
                            <a class="text-uppercase nav-link text-research" href="../../research/">
                                
                                Research
                            </a>
                        </li>
                    
                        <li class="nav-item">
                            <a class="text-uppercase nav-link text-publications" href="../../publications/">
                                
                                Publications
                            </a>
                        </li>
                    
                        <li class="nav-item">
                            <a class="text-uppercase nav-link text-software" href="../../software/">
                                
                                Software
                            </a>
                        </li>
                    
                        <li class="nav-item">
                            <a class="text-uppercase nav-link text-blog" href="../../blog/">
                                
                                Blog
                            </a>
                        </li>
                    

                    
                </ul>

            </div>
        </div>
    </div>
</div>


    <div class="content">
        <div class="container">
            <div class="row justify-content-center">
                <div class="col-sm-12 col-md-10">
                    <h1 class="mx-0 mx-md-4 blog-post-title">Installing PyTorch</h1>

                    <div class="mb-md-4 meta">
                        
                            
                                <span class="author" title="Tim Stuart">
                                    Tim Stuart
                                </span>
                            
                        

                        <span class="date middot" title='Sun Apr 5 2020 00:00:00 UTC'>
                            2020-04-05
                        </span>

                        <span class="reading-time middot">
                            2 minute read
                        </span>

                        <div class="d-none d-md-inline tags">
                            <ul class="list-unstyled d-inline">
                                
                            </ul>
                        </div>

                        <div class="d-none d-md-inline tags">
                            <ul class="list-unstyled d-inline">
                                
                                
                            </ul>
                        </div>
                    </div>

                    <div class="markdown">
                        
    
<script src="../../rmarkdown-libs/header-attrs/header-attrs.js"></script>


<p>See the PyTorch website: <a href="https://pytorch.org/tutorials/" class="uri">https://pytorch.org/tutorials/</a></p>
<div id="install-miniconda" class="section level2">
<h2>1. Install miniconda</h2>
<p>I find minoconda3 is the easiest way to get everything installed and working for pytorch. Install the python 3.7 64 bit linux version from here:</p>
<p><a href="https://docs.conda.io/en/latest/miniconda.html" class="uri">https://docs.conda.io/en/latest/miniconda.html</a></p>
</div>
<div id="create-a-conda-environment" class="section level2">
<h2>2. Create a conda environment</h2>
<p>It’s a good idea to use a separate environment for different projects. Create a new conda environment for deep learning stuff:</p>
<pre class="bash"><code>conda create --name cnn</code></pre>
</div>
<div id="activate-the-conda-environment" class="section level2">
<h2>3. Activate the conda environment</h2>
<pre class="bash"><code>conda activate cnn</code></pre>
</div>
<div id="install-python-packages-in-conda-environment" class="section level2">
<h2>4. Install python packages in conda environment</h2>
<p>Install pytorch and its dependencies</p>
<pre class="bash"><code>conda install pytorch torchvision -c pytorch</code></pre>
<p>Install jupyterlab:</p>
<pre class="bash"><code>conda install -c conda-forge jupyterlab</code></pre>
</div>
<div id="setting-up-cuda" class="section level2">
<h2>5. Setting up CUDA</h2>
<p>Using a GPU with pytorch requires an NVIDIA GPU and the CUDA toolkit installed. Follow instructions here to get the CUDA toolkit installed: <a href="https://developer.nvidia.com/cuda-downloads?target_os=Linux&amp;target_arch=x86_64&amp;target_distro=Ubuntu&amp;target_version=1804&amp;target_type=deblocal">CUDA Toolkit 10.2 Download | NVIDIA Developer</a></p>
</div>
<div id="configuring-jupyter" class="section level2">
<h2>6. Configuring Jupyter</h2>
<p>We need to link the jupyter kernelspec to the conda environment we created. The configuration for available jupyter kernels is stored in <code>~/.local/share/jupyter/kernels</code>. To create a new kernel for jupyter, create a directory within the kernels directory called cnn: <code>~/.local/share/jupyter/kernels/cnn</code>. Within this directory create a file called kernel.json containing the following (change path for your user account):</p>
<pre class="json"><code>{
 &quot;argv&quot;: [
  &quot;/home/stuartt/miniconda3/envs/cnn/bin/python&quot;,
  &quot;-m&quot;,
  &quot;ipykernel_launcher&quot;,
  &quot;-f&quot;,
  &quot;{connection_file}&quot;
 ],
 &quot;display_name&quot;: &quot;CNN&quot;,
 &quot;language&quot;: &quot;python&quot;
}</code></pre>
<p>This will allow you to select the python installation created by your conda
environment as a drop-down in the new notebook menu in jupyter.</p>
</div>
<div id="running-jupyter-lab-remotely" class="section level2">
<h2>7. Running jupyter lab remotely</h2>
<p>You will need to launch jupyter on the remote server and set up ssh tunnelling on your local computer. It’s a good idea to start jupyter in a GNU screen so that you can close your ssh session and keep the notebook active.</p>
<p>On the remote server:</p>
<pre class="bash"><code># start a screen
screen -S torch
# activate environment
conda activate cnn
# can cd to wherever you want to start the notebook from
# start jupyter
jupyter lab --no-browser --port=8889</code></pre>
<p>On your local machine:</p>
<pre class="bash"><code>ssh -f &lt;remote-address&gt; -L 8889:localhost:8889 -N</code></pre>
</div>
<div id="verify-that-everything-works" class="section level2">
<h2>8. Verify that everything works</h2>
<p>Navigate to <a href="http://localhost:8889/lab" class="uri">http://localhost:8889/lab</a> and you should see jupyterlab.
Open a new ipython notebook using the conda env and run the following code:</p>
<pre class="python"><code>import torch
torch.cuda.is_available()</code></pre>
<p>Should see <code>True</code>.</p>
</div>



                    </div>

                    
                        <div class="navigation">
                            <div class="row">
                                <div class="col-12 col-md-6">
                                    
                                        <div class="mx-0 mx-md-4 mt-4 text-left">
                                            <a href="../../blog/sinto/">« Grouping scATAC-seq reads</a>
                                        </div>
                                    
                                </div>
                                <div class="col-12 col-md-6">
                                    
                                </div>
                            </div>
                        </div>
                    
                </div>
            </div>
        </div>
    </div>

    <section id="comments">

      <div class="py-3 content">
            <div class="container">
                  <div class="row justify-content-center">
                        <div class="col-sm-12 col-md-10">
                              <div class="comments">
                                    <div id="disqus_thread"></div>
                              </div>
                        </div>
                  </div>
            </div>
      </div>

      <script type="text/javascript">
            (function () {
                  
                  
                  if (window.location.hostname == "localhost")
                        return;

                  var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
                  var disqus_shortname = '';
                  dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js';
                  (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
            })();
      </script>
      <noscript>
            Please enable JavaScript to view the
            <a href="https://disqus.com/?ref_noscript">comments powered by Disqus.</a>
      </noscript>
</section>
    <div class="my-4 footer">
    <div class="container">
        <div class="row justify-content-center">
            <div class="col-sm-12 col-md-5">
                
            </div>
            <div class="col-sm-12 col-md-5">
                <div class="mx-0 mx-md-4 text-right">
                    
                        <a href="https://github.com/timoast" target="_blank">
                            <img class="icon" src="../../img/github.svg" alt="github" />
                        </a>
                    

                    

                    
                        <a href="https://twitter.com/timoast" target="_blank">
                            <img class="icon" src="../../img/twitter.svg" alt="twitter" />
                        </a>
                    

                    

                    

                    

                    

                    
                        <a href="../../index.xml" class="mr-0">
                            <img class="icon" src="../../img/rss.svg" alt="rss" />
                        </a>
                    

                    
                </div>
            </div>
        </div>
    </div>
</div>



    

    
        <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.13.1/highlight.min.js" integrity="sha256-iq71rXEe/fvjCUP9AfLY0cKudQuKAQywiUpXkRFSkLc=" crossorigin="anonymous"></script>
        
        <script>
            window.addEventListener('load', function() {
                hljs.initHighlighting();
            }, true);
        </script>
    

    

    
<script type="application/javascript">
var doNotTrack = false;
if (!doNotTrack) {
	window.ga=window.ga||function(){(ga.q=ga.q||[]).push(arguments)};ga.l=+new Date;
	ga('create', 'UA-131769435-1', 'auto');
	
	ga('send', 'pageview');
}
</script>
<script async src='https://www.google-analytics.com/analytics.js'></script>

    
        

    
</body>

</html>
